{"version":3,"names":["RollingBar","props","opacity","useState","Animated","Value","translateY","visibleIndex","setVisibleIndex","children","interval","customStyle","animationDuration","delayBetween","defaultStyle","forceRoll","childrenCount","React","Children","count","animate","useCallback","defaultConfig","duration","useNativeDriver","isInteraction","sequence","parallel","timing","toValue","delay","start","useEffect","useInterval","styles","container","containerMinimal","transform","perspective","map","child","idx","hideRow","StyleSheet","create","flex","overflow","backgroundColor","borderColor","borderTopWidth","borderBottomWidth","justifyContent","paddingHorizontal","paddingVertical","display"],"sources":["index.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { View, Animated, StyleSheet, ViewStyle, StyleProp } from 'react-native';\nimport useInterval from './util/useInterval';\n\ntype Props = {\n  interval: number;\n  customStyle?: StyleProp<ViewStyle>;\n  animationDuration?: number;\n  delayBetween?: number;\n  defaultStyle?: boolean;\n  forceRoll?: boolean;\n};\n\nconst RollingBar: React.FC<Props> = (props) => {\n  const [opacity] = useState(new Animated.Value(0));\n  const [translateY] = useState(new Animated.Value(10));\n  const [visibleIndex, setVisibleIndex] = useState(0);\n  const {\n    children,\n    interval = 3000,\n    customStyle,\n    animationDuration = 600,\n    delayBetween = 100,\n    defaultStyle = false,\n    forceRoll = false,\n  } = props;\n  const childrenCount = React.Children.count(children);\n\n  const animate = useCallback(() => {\n    const defaultConfig = {\n      duration: animationDuration / 2,\n      useNativeDriver: true,\n      isInteraction: false,\n    };\n    if (childrenCount > 1 || forceRoll) {\n      Animated.sequence([\n        Animated.parallel([\n          Animated.timing(translateY, {\n            toValue: 20,\n            ...defaultConfig,\n            duration: 0,\n          }),\n          Animated.timing(opacity, {\n            toValue: 0,\n            ...defaultConfig,\n            duration: 0,\n          }),\n        ]),\n\n        Animated.parallel([\n          Animated.timing(translateY, {\n            toValue: 0,\n            ...defaultConfig,\n          }),\n          Animated.timing(opacity, {\n            toValue: 1,\n            ...defaultConfig,\n          }),\n        ]),\n\n        Animated.delay(interval),\n\n        Animated.parallel([\n          Animated.timing(translateY, {\n            toValue: -10,\n            ...defaultConfig,\n          }),\n          Animated.timing(opacity, {\n            toValue: 0,\n            ...defaultConfig,\n          }),\n        ]),\n      ]).start();\n    } else {\n      Animated.parallel([\n        Animated.timing(translateY, {\n          toValue: 0,\n          ...defaultConfig,\n          duration: 0,\n        }),\n        Animated.timing(opacity, {\n          toValue: 1,\n          ...defaultConfig,\n          duration: 0,\n        }),\n      ]).start();\n    }\n  }, [animationDuration, childrenCount]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    animate();\n  }, [animate]);\n\n  useInterval(() => {\n    if (childrenCount > 1 || forceRoll) {\n      setVisibleIndex((visibleIndex + 1) % childrenCount);\n      animate();\n    }\n  }, interval + animationDuration + delayBetween);\n\n  return (\n    <View\n      style={[\n        defaultStyle ? styles.container : styles.containerMinimal,\n        customStyle,\n      ]}\n    >\n      <Animated.View\n        style={{\n          opacity,\n          transform: [{ translateY }, { perspective: 1000 }],\n        }}\n      >\n        {React.Children.map(children, (child, idx) => {\n          return (\n            <View key={`${idx}`} style={visibleIndex !== idx && styles.hideRow}>\n              <>{child}</>\n            </View>\n          );\n        })}\n      </Animated.View>\n    </View>\n  );\n};\n\nexport default RollingBar;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    overflow: 'hidden',\n    backgroundColor: '#eaeaea',\n    borderColor: '#bbb',\n    borderTopWidth: 1,\n    borderBottomWidth: 1,\n    justifyContent: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n  },\n  containerMinimal: {\n    flex: 1,\n    overflow: 'hidden',\n    justifyContent: 'center',\n  },\n  hideRow: { display: 'none' },\n});\n"],"mappings":"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"}