{"version":3,"names":["React","useState","useEffect","useCallback","View","Animated","StyleSheet","useInterval","RollingBar","props","opacity","Value","translateY","visibleIndex","setVisibleIndex","children","interval","customStyle","animationDuration","delayBetween","defaultStyle","forceRoll","childrenCount","Children","count","animate","defaultConfig","duration","useNativeDriver","isInteraction","sequence","parallel","timing","toValue","delay","start","styles","container","containerMinimal","transform","perspective","map","child","idx","hideRow","create","flex","overflow","backgroundColor","borderColor","borderTopWidth","borderBottomWidth","justifyContent","paddingHorizontal","paddingVertical","display"],"sources":["index.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { View, Animated, StyleSheet, ViewStyle, StyleProp } from 'react-native';\nimport useInterval from './util/useInterval';\n\ntype Props = {\n  interval: number;\n  customStyle?: StyleProp<ViewStyle>;\n  animationDuration?: number;\n  delayBetween?: number;\n  defaultStyle?: boolean;\n  forceRoll?: boolean;\n};\n\nconst RollingBar: React.FC<Props> = (props) => {\n  const [opacity] = useState(new Animated.Value(0));\n  const [translateY] = useState(new Animated.Value(10));\n  const [visibleIndex, setVisibleIndex] = useState(0);\n  const {\n    children,\n    interval = 3000,\n    customStyle,\n    animationDuration = 600,\n    delayBetween = 100,\n    defaultStyle = false,\n    forceRoll = false,\n  } = props;\n  const childrenCount = React.Children.count(children);\n\n  const animate = useCallback(() => {\n    const defaultConfig = {\n      duration: animationDuration / 2,\n      useNativeDriver: true,\n      isInteraction: false,\n    };\n    if (childrenCount > 1 || forceRoll) {\n      Animated.sequence([\n        Animated.parallel([\n          Animated.timing(translateY, {\n            toValue: 20,\n            ...defaultConfig,\n            duration: 0,\n          }),\n          Animated.timing(opacity, {\n            toValue: 0,\n            ...defaultConfig,\n            duration: 0,\n          }),\n        ]),\n\n        Animated.parallel([\n          Animated.timing(translateY, {\n            toValue: 0,\n            ...defaultConfig,\n          }),\n          Animated.timing(opacity, {\n            toValue: 1,\n            ...defaultConfig,\n          }),\n        ]),\n\n        Animated.delay(interval),\n\n        Animated.parallel([\n          Animated.timing(translateY, {\n            toValue: -10,\n            ...defaultConfig,\n          }),\n          Animated.timing(opacity, {\n            toValue: 0,\n            ...defaultConfig,\n          }),\n        ]),\n      ]).start();\n    } else {\n      Animated.parallel([\n        Animated.timing(translateY, {\n          toValue: 0,\n          ...defaultConfig,\n          duration: 0,\n        }),\n        Animated.timing(opacity, {\n          toValue: 1,\n          ...defaultConfig,\n          duration: 0,\n        }),\n      ]).start();\n    }\n  }, [animationDuration, childrenCount]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    animate();\n  }, [animate]);\n\n  useInterval(() => {\n    if (childrenCount > 1 || forceRoll) {\n      setVisibleIndex((visibleIndex + 1) % childrenCount);\n      animate();\n    }\n  }, interval + animationDuration + delayBetween);\n\n  return (\n    <View\n      style={[\n        defaultStyle ? styles.container : styles.containerMinimal,\n        customStyle,\n      ]}\n    >\n      <Animated.View\n        style={{\n          opacity,\n          transform: [{ translateY }, { perspective: 1000 }],\n        }}\n      >\n        {React.Children.map(children, (child, idx) => {\n          return (\n            <View key={`${idx}`} style={visibleIndex !== idx && styles.hideRow}>\n              <>{child}</>\n            </View>\n          );\n        })}\n      </Animated.View>\n    </View>\n  );\n};\n\nexport default RollingBar;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    overflow: 'hidden',\n    backgroundColor: '#eaeaea',\n    borderColor: '#bbb',\n    borderTopWidth: 1,\n    borderBottomWidth: 1,\n    justifyContent: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n  },\n  containerMinimal: {\n    flex: 1,\n    overflow: 'hidden',\n    justifyContent: 'center',\n  },\n  hideRow: { display: 'none' },\n});\n"],"mappings":"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"}